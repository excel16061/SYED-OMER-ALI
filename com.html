<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Intel // Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --accent: #007AFF;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            justify-content: center;
            padding: 40px 20px;
        }

        /* Dashboard Styling */
        .dashboard {
            background: var(--card-bg);
            max-width: 800px;
            width: 100%;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.05);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #1d1d1f;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-card {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
        }

        .info-card i {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .info-card label {
            display: block;
            font-size: 0.75rem;
            color: #64748b;
            text-transform: uppercase;
            font-weight: 700;
        }

        .info-card span {
            font-size: 1rem;
            color: #1e293b;
            font-weight: 600;
            word-break: break-all;
        }

        /* Form Styling */
        .user-input {
            border-top: 1px solid #eee;
            padding-top: 30px;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        input, textarea {
            width: 100%;
            padding: 12px;
            border: 1.5px solid #e2e8f0;
            border-radius: 10px;
            box-sizing: border-box;
            font-size: 14px;
        }

        button {
            width: 100%;
            background: var(--accent);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            font-size: 1rem;
        }

        button:hover { background: #0056b3; }

        /* PDF Specific Styles (Hidden on Web) */
        #pdf-content { padding: 20px; position: relative; display: none; }
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 80px;
            color: rgba(0, 0, 0, 0.05);
            white-space: nowrap;
            pointer-events: none;
            z-index: 0;
        }
        .pdf-border {
            border: 10px double var(--accent);
            padding: 30px;
        }
    </style>
</head>
<body>

<div class="dashboard">
    <div class="header">
        <i class="fa-solid fa-microchip" style="font-size: 3rem; color: var(--accent);"></i>
        <h1>Device Intelligence</h1>
        <p style="color: #666;">Explore your hardware and browser environment details.</p>
    </div>

    <div class="grid" id="stats-grid">
        </div>

    <div class="user-input">
        <h3 style="margin-bottom: 15px;">Finalize Report</h3>
        <div class="input-row">
            <input type="email" id="email" placeholder="Gmail / Email Address" required>
            <input type="tel" id="phone" placeholder="Phone (Optional)">
        </div>
        <textarea id="message" rows="3" placeholder="Add a personal note to this report..."></textarea>
        <button onclick="generateReport()">
            <i class="fa-solid fa-file-pdf"></i> Generate PDF Report
        </button>
    </div>
</div>

<div id="pdf-template" style="display: none;">
    <div class="pdf-border">
        <div class="watermark">Excel16061</div>
        <div style="text-align: center;">
            <h1 style="color: #007AFF;">SYSTEM DIAGNOSTIC REPORT</h1>
            <p>Generated on: <span id="pdf-date"></span></p>
        </div>
        <hr>
        <div id="pdf-body"></div>
        <div style="margin-top: 30px; padding: 15px; background: #f8f9fa;">
            <strong>User Message:</strong> <p id="pdf-msg"></p>
            <strong>Contact:</strong> <span id="pdf-contact"></span>
        </div>
        <div style="text-align: center; margin-top: 50px; font-size: 10px; color: #999;">
            Verified System Audit - Excel16061
        </div>
    </div>
</div>

<script>
    const dataPoints = [
        { label: "Public IP", icon: "fa-network-wired", value: "Fetching...", id: "ip" },
        { label: "Browser", icon: "fa-browser", id: "browser" },
        { label: "OS / Platform", icon: "fa-laptop", id: "os" },
        { label: "Screen Resolution", icon: "fa-display", id: "screen" },
        { label: "Processor Cores", icon: "fa-cpu", id: "cores" },
        { label: "Device Language", icon: "fa-language", id: "lang" },
        { label: "Session ID", icon: "fa-fingerprint", id: "sid" }
    ];

    // Initialize Dashboard
    function init() {
        const grid = document.getElementById('stats-grid');
        dataPoints.forEach(point => {
            grid.innerHTML += `
                <div class="info-card">
                    <i class="fa-solid ${point.icon}"></i>
                    <label>${point.label}</label>
                    <span id="data-${point.id}">${point.value || 'N/A'}</span>
                </div>
            `;
        });

        // Fill Data
        document.getElementById('data-browser').innerText = navigator.userAgent.split(' ').pop();
        document.getElementById('data-os').innerText = navigator.platform;
        document.getElementById('data-screen').innerText = `${window.screen.width} x ${window.screen.height}`;
        document.getElementById('data-cores').innerText = navigator.hardwareConcurrency + " Logical Cores";
        document.getElementById('data-lang').innerText = navigator.language.toUpperCase();
        document.getElementById('data-sid').innerText = Math.random().toString(36).substring(2, 10).toUpperCase();

        fetch('https://api.ipify.org?format=json')
            .then(res => res.json())
            .then(data => document.getElementById('data-ip').innerText = data.ip)
            .catch(() => document.getElementById('data-ip').innerText = "127.0.0.1");
    }

    async function generateReport() {
        const email = document.getElementById('email').value;
        if(!email) return alert("Please enter your Email.");

        // Prepare PDF Template
        document.getElementById('pdf-date').innerText = new Date().toLocaleString();
        document.getElementById('pdf-msg').innerText = document.getElementById('message').value || "No note provided.";
        document.getElementById('pdf-contact').innerText = `${email} | ${document.getElementById('phone').value || 'N/A'}`;
        
        let bodyContent = "<h3>Device Specifications:</h3><ul>";
        dataPoints.forEach(p => {
            const val = document.getElementById(`data-${p.id}`).innerText;
            bodyContent += `<li><strong>${p.label}:</strong> ${val}</li>`;
        });
        bodyContent += "</ul>";
        document.getElementById('pdf-body').innerHTML = bodyContent;

        // Use html2pdf to download
        const element = document.getElementById('pdf-template');
        element.style.display = 'block'; // Briefly show to capture
        
        const opt = {
            margin: 10,
            filename: `System_Report_${email}.pdf`,
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };

        html2pdf().set(opt).from(element).save().then(() => {
            element.style.display = 'none';
            alert("Report Generated with Excel16061 Watermark!");
        });
    }

    init();
</script>

</body>
</html>
